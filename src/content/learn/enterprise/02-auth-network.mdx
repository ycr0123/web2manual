---
title: "인증 & 네트워크 설정"
description: "엔터프라이즈 환경에서 Claude Code의 인증 방법과 네트워크 구성을 학습합니다."
trackId: "enterprise"
lessonId: "auth-network"
difficulty: "advanced"
estimatedMinutes: 50
order: 2
objectives:
  - "OAuth 및 API 키 인증 방법 학습"
  - "프록시 및 방화벽 설정 이해"
  - "SSO 통합 방법 파악"
sourceDocs:
  - "6.1-authentication.md"
  - "6.2-network-config.md"
tags:
  - "인증"
  - "네트워크"
  - "보안"
quiz:
  passingScore: 70
  questions:
    - id: "q1"
      question: "엔터프라이즈 환경에서 Claude Code 인증 시 가장 권장되는 방법은?"
      type: "multiple-choice"
      options:
        - id: "a"
          text: "하드코딩된 API 키"
        - id: "b"
          text: "조직 SSO(Single Sign-On) 통합"
        - id: "c"
          text: "공유 계정 사용"
        - id: "d"
          text: "인증 없이 사용"
      correctOptionId: "b"
      explanation: "엔터프라이즈 환경에서는 SSO를 통해 조직의 기존 인증 시스템과 통합하는 것이 가장 안전하고 관리하기 편리합니다. 개별 API 키 관리보다 중앙화된 접근 제어가 가능합니다."
    - id: "q2"
      question: "기업 프록시 환경에서 Claude Code가 외부 API에 연결하기 위해 설정해야 하는 환경 변수는?"
      type: "multiple-choice"
      options:
        - id: "a"
          text: "PROXY_URL"
        - id: "b"
          text: "HTTP_PROXY 및 HTTPS_PROXY"
        - id: "c"
          text: "NETWORK_MODE"
        - id: "d"
          text: "API_GATEWAY"
      correctOptionId: "b"
      explanation: "HTTP_PROXY와 HTTPS_PROXY는 표준 프록시 환경 변수로, Claude Code를 포함한 대부분의 네트워크 도구가 이 변수를 인식하여 프록시를 통해 통신합니다."
    - id: "q3"
      question: "API 키 로테이션이 중요한 이유는?"
      type: "multiple-choice"
      options:
        - id: "a"
          text: "성능을 향상시키기 위해"
        - id: "b"
          text: "키 유출 시 피해 범위를 제한하고 보안을 강화하기 위해"
        - id: "c"
          text: "새로운 기능을 활성화하기 위해"
        - id: "d"
          text: "API 호출 비용을 줄이기 위해"
      correctOptionId: "b"
      explanation: "정기적인 API 키 로테이션은 키가 유출되더라도 유효 기간을 제한하여 피해를 최소화합니다. 이는 보안 모범 사례(Security Best Practice)의 핵심 요소입니다."
    - id: "q4"
      question: "Claude Code에서 SSL 인증서 검증 오류가 발생할 때 올바른 해결 방법은?"
      type: "multiple-choice"
      options:
        - id: "a"
          text: "SSL 검증을 완전히 비활성화한다"
        - id: "b"
          text: "기업 CA 인증서를 NODE_EXTRA_CA_CERTS 환경 변수로 등록한다"
        - id: "c"
          text: "HTTP로 다운그레이드한다"
        - id: "d"
          text: "VPN을 사용한다"
      correctOptionId: "b"
      explanation: "기업 환경에서는 자체 CA 인증서를 사용하는 경우가 많습니다. NODE_EXTRA_CA_CERTS 환경 변수를 통해 추가 인증서를 등록하면 SSL 검증을 유지하면서 기업 네트워크에서 정상 동작합니다."
---

## 인증 방법 개요

엔터프라이즈 환경에서 Claude Code를 배포할 때 가장 먼저 해결해야 할 것은 인증 체계입니다. 조직의 보안 정책에 맞는 인증 방법을 선택하고 올바르게 구성해야 합니다.

### API 키 인증

가장 기본적인 인증 방식으로, 개인 개발자나 소규모 팀에 적합합니다.

```bash
# API 키 설정 방법

# 1. 환경 변수로 설정 (권장)
export ANTHROPIC_API_KEY="sk-ant-api03-..."

# 2. 셸 프로파일에 영구 설정
echo 'export ANTHROPIC_API_KEY="sk-ant-api03-..."' >> ~/.bashrc
source ~/.bashrc

# 3. 프로젝트별 .env 파일 사용
echo 'ANTHROPIC_API_KEY=sk-ant-api03-...' > .env
```

<Callout type="warning">
API 키를 소스 코드에 직접 포함하거나 Git 저장소에 커밋하는 것은 심각한 보안 위험입니다. 반드시 환경 변수나 시크릿 관리 서비스를 사용하세요.
</Callout>

### API 키 관리 모범 사례

| 항목 | 권장 사항 | 위험한 관행 |
|-----|----------|-----------|
| 저장 위치 | 환경 변수, 시크릿 관리자 | 소스 코드, 설정 파일 |
| 공유 방법 | 시크릿 관리 서비스 | 이메일, 메신저, 문서 |
| 로테이션 | 90일마다 갱신 | 무기한 동일 키 사용 |
| 권한 범위 | 최소 권한 원칙 | 전체 관리자 권한 |

### OAuth 기반 인증

엔터프라이즈 환경에서는 OAuth 2.0 프로토콜을 사용한 인증이 더 적합합니다.

```bash
# OAuth 설정 예시
claude auth login --provider oauth \
  --client-id "your-client-id" \
  --auth-url "https://auth.company.com/oauth/authorize" \
  --token-url "https://auth.company.com/oauth/token"
```

<CLIExample
  command="claude auth status"
  description="현재 인증 상태와 토큰 유효 기간을 확인합니다"
/>

### SSO(Single Sign-On) 통합

대규모 조직에서는 기존 SSO 시스템과 Claude Code를 통합하여 중앙화된 접근 제어를 구현할 수 있습니다.

주요 SSO 프로토콜 지원:
- **SAML 2.0**: Azure AD, Okta, OneLogin
- **OpenID Connect**: Google Workspace, Auth0
- **LDAP**: Active Directory 직접 통합

```json
// 조직 SSO 설정 예시 (관리자 콘솔)
{
  "sso": {
    "provider": "okta",
    "domain": "company.okta.com",
    "clientId": "0oa...",
    "redirectUri": "https://claude.ai/callback",
    "scopes": ["openid", "profile", "email"]
  }
}
```

<Callout type="tip">
SSO를 도입하면 직원 입퇴사 시 Claude Code 접근 권한이 자동으로 관리됩니다. IT 관리자가 개별 API 키를 발급하고 회수할 필요가 없어 관리 부담이 크게 줄어듭니다.
</Callout>

## 네트워크 구성

### 프록시 설정

기업 네트워크에서는 외부 인터넷 접근이 프록시 서버를 통해 이루어지는 경우가 많습니다.

```bash
# 프록시 환경 변수 설정
export HTTP_PROXY="http://proxy.company.com:8080"
export HTTPS_PROXY="http://proxy.company.com:8080"
export NO_PROXY="localhost,127.0.0.1,.company.com"

# 인증이 필요한 프록시
export HTTPS_PROXY="http://username:password@proxy.company.com:8080"

# 셸 프로파일에 영구 설정
cat >> ~/.bashrc << 'EOF'
export HTTP_PROXY="http://proxy.company.com:8080"
export HTTPS_PROXY="http://proxy.company.com:8080"
export NO_PROXY="localhost,127.0.0.1,.company.com"
EOF
```

<CLIExample
  command="curl -x http://proxy.company.com:8080 https://api.anthropic.com/health"
  description="프록시를 통한 Anthropic API 연결 상태를 테스트합니다"
/>

### 방화벽 설정

Claude Code가 정상 동작하려면 다음 엔드포인트에 대한 네트워크 접근이 필요합니다:

```bash
# Claude Code가 접근해야 하는 주요 엔드포인트
# Anthropic API
api.anthropic.com:443

# 인증 서비스
auth.anthropic.com:443

# 텔레메트리 (선택적)
telemetry.anthropic.com:443

# npm 패키지 (업데이트용)
registry.npmjs.org:443
```

<Callout type="note">
방화벽 규칙 설정 시 IP 주소가 아닌 도메인 이름 기반으로 허용하세요. 클라우드 서비스의 IP 주소는 변경될 수 있습니다.
</Callout>

### SSL/TLS 인증서 설정

기업 환경에서 자체 CA(Certificate Authority)를 사용하는 경우, Node.js가 해당 인증서를 신뢰하도록 설정해야 합니다.

```bash
# 기업 CA 인증서 등록
export NODE_EXTRA_CA_CERTS="/path/to/company-ca-bundle.crt"

# 인증서 번들 파일 확인
openssl x509 -in /path/to/company-ca-bundle.crt -text -noout | head -20

# 영구 설정
echo 'export NODE_EXTRA_CA_CERTS="/path/to/company-ca-bundle.crt"' >> ~/.bashrc
```

<Callout type="danger">
SSL 인증서 검증을 비활성화(NODE_TLS_REJECT_UNAUTHORIZED=0)하는 것은 절대로 프로덕션 환경에서 사용하지 마세요. 중간자 공격(MITM)에 노출될 수 있습니다.
</Callout>

### 네트워크 진단

네트워크 문제 발생 시 다음 단계로 진단하세요:

```bash
# 1. DNS 확인
nslookup api.anthropic.com

# 2. 연결 테스트
curl -v https://api.anthropic.com/v1/messages 2>&1 | head -30

# 3. 프록시 경유 테스트
curl -v -x $HTTPS_PROXY https://api.anthropic.com/v1/messages 2>&1 | head -30

# 4. SSL 인증서 체인 확인
openssl s_client -connect api.anthropic.com:443 -showcerts
```

<Collapsible title="기업 네트워크 환경 체크리스트">

Claude Code를 기업 네트워크에 배포하기 전 확인해야 할 항목:

- [ ] Anthropic API 엔드포인트 방화벽 허용
- [ ] 프록시 서버 설정 완료
- [ ] SSL/TLS 인증서 신뢰 설정
- [ ] DNS 해석 정상 동작 확인
- [ ] API 키 또는 SSO 인증 설정
- [ ] NO_PROXY 설정으로 내부 서비스 제외
- [ ] 네트워크 타임아웃 설정 검토
- [ ] 로깅 및 감사 로그 설정

</Collapsible>

## 다음 단계

인증과 네트워크 설정을 마쳤으면, 다음 레슨에서 CI/CD 파이프라인에 Claude Code를 통합하여 개발 워크플로우를 자동화하는 방법을 학습합니다.
