---
title: "Sandboxing"
titleKo: "샌드박싱"
description: "Learn how Claude Code sandboxed bash tool provides filesystem and network isolation."
descriptionKo: "Claude Code의 샌드박스 bash 도구가 파일시스템 및 네트워크 격리를 제공하는 방법을 알아봅니다."
source: https://code.claude.com/docs/en/sandboxing.md
fetched: 2026-02-18
section: 7.2
---

# 샌드박싱

> Claude Code의 샌드박스 bash 도구가 더 안전하고 자율적인 에이전트 실행을 위해 파일시스템 및 네트워크 격리를 제공하는 방법을 알아봅니다.

## 개요

Claude Code는 에이전트 실행을 위한 더 안전한 환경을 제공하고 지속적인 권한 프롬프트의 필요성을 줄이기 위해 네이티브 샌드박싱을 제공합니다. 각 bash 명령에 대해 권한을 요청하는 대신, 샌드박싱은 Claude Code가 줄어든 위험으로 더 자유롭게 작업할 수 있는 경계를 미리 정의합니다.

샌드박스 bash 도구는 OS 수준의 프리미티브를 사용하여 파일시스템 및 네트워크 격리를 모두 적용합니다.

## 샌드박싱이 중요한 이유

전통적인 권한 기반 보안은 bash 명령에 대해 지속적인 사용자 승인이 필요합니다. 이는 제어를 제공하지만 다음과 같은 문제로 이어질 수 있습니다:

* **승인 피로**: 반복적으로 "승인"을 클릭하다 보면 사용자가 승인 내용에 덜 주의를 기울이게 될 수 있습니다
* **생산성 저하**: 지속적인 중단이 개발 워크플로우를 느리게 만듭니다
* **제한된 자율성**: 승인을 기다리는 동안 Claude Code가 효율적으로 작업할 수 없습니다

샌드박싱은 다음과 같이 이러한 문제를 해결합니다:

1. **명확한 경계 정의**: Claude Code가 접근할 수 있는 디렉터리와 네트워크 호스트를 정확히 지정합니다
2. **권한 프롬프트 감소**: 샌드박스 내의 안전한 명령은 승인이 필요하지 않습니다
3. **보안 유지**: 샌드박스 외부의 리소스 접근 시도는 즉시 알림을 트리거합니다
4. **자율성 활성화**: Claude Code가 정의된 한계 내에서 더 독립적으로 실행할 수 있습니다

> **경고**: 효과적인 샌드박싱에는 파일시스템과 네트워크 격리 **모두**가 필요합니다. 네트워크 격리 없이는 손상된 에이전트가 SSH 키와 같은 민감한 파일을 외부로 유출할 수 있습니다. 파일시스템 격리 없이는 손상된 에이전트가 시스템 리소스를 백도어하여 네트워크 접근 권한을 얻을 수 있습니다. 샌드박싱을 구성할 때는 설정이 이러한 시스템에 우회 경로를 만들지 않도록 주의해야 합니다.

## 작동 방식

### 파일시스템 격리

샌드박스 bash 도구는 파일 시스템 접근을 특정 디렉터리로 제한합니다:

* **기본 쓰기 동작**: 현재 작업 디렉터리와 하위 디렉터리에 대한 읽기 및 쓰기 접근
* **기본 읽기 동작**: 특정 거부 디렉터리를 제외한 전체 컴퓨터에 대한 읽기 접근
* **차단된 접근**: 명시적 권한 없이 현재 작업 디렉터리 외부의 파일 수정 불가
* **구성 가능**: 설정을 통해 허용 및 거부 경로 커스터마이즈 가능

### 네트워크 격리

네트워크 접근은 샌드박스 외부에서 실행되는 프록시 서버를 통해 제어됩니다:

* **도메인 제한**: 승인된 도메인만 접근 가능
* **사용자 확인**: 새 도메인 요청 시 권한 프롬프트 트리거
* **커스텀 프록시 지원**: 고급 사용자는 발신 트래픽에 커스텀 규칙 구현 가능
* **포괄적 적용**: 명령이 생성한 모든 스크립트, 프로그램, 서브프로세스에 제한 적용

### OS 수준 적용

샌드박스 bash 도구는 운영 체제 보안 프리미티브를 활용합니다:

* **macOS**: 샌드박스 적용을 위해 Seatbelt 사용
* **Linux**: 격리를 위해 [bubblewrap](https://github.com/containers/bubblewrap) 사용
* **WSL2**: Linux와 동일하게 bubblewrap 사용

WSL1은 bubblewrap이 WSL2에서만 사용 가능한 커널 기능을 필요로 하기 때문에 지원되지 않습니다.

이러한 OS 수준의 제한은 Claude Code 명령이 생성한 모든 자식 프로세스가 동일한 보안 경계를 상속받도록 보장합니다.

## 시작하기

### 사전 요구 사항

**macOS**에서는 내장 Seatbelt 프레임워크를 사용하여 샌드박싱이 즉시 작동합니다.

**Linux 및 WSL2**에서는 먼저 필요한 패키지를 설치하세요:

**Ubuntu/Debian:**
```bash
sudo apt-get install bubblewrap socat
```

**Fedora:**
```bash
sudo dnf install bubblewrap socat
```

### 샌드박싱 활성화

`/sandbox` 명령을 실행하여 샌드박싱을 활성화할 수 있습니다:

```
> /sandbox
```

이렇게 하면 샌드박스 모드 중에서 선택할 수 있는 메뉴가 열립니다. Linux에서 `bubblewrap`이나 `socat`과 같은 필수 의존성이 없으면 메뉴에 플랫폼별 설치 지침이 표시됩니다.

### 샌드박스 모드

Claude Code는 두 가지 샌드박스 모드를 제공합니다:

**자동 허용 모드**: Bash 명령이 샌드박스 내에서 실행을 시도하며 권한 없이 자동으로 허용됩니다. 샌드박스화할 수 없는 명령(비허용 호스트에 대한 네트워크 접근이 필요한 경우 등)은 일반 권한 흐름으로 대체됩니다. 구성된 명시적 묻기/거부 규칙은 항상 적용됩니다.

**일반 권한 모드**: 모든 bash 명령이 샌드박스화된 경우에도 표준 권한 흐름을 거칩니다. 더 많은 제어를 제공하지만 더 많은 승인이 필요합니다.

두 모드 모두 샌드박스는 동일한 파일시스템 및 네트워크 제한을 적용합니다. 차이점은 샌드박스화된 명령이 자동 승인되는지 명시적 권한이 필요한지 여부뿐입니다.

> **정보**: 자동 허용 모드는 권한 모드 설정과 독립적으로 작동합니다. "편집 수락" 모드가 아니더라도 자동 허용이 활성화된 경우 샌드박스화된 bash 명령이 자동으로 실행됩니다. 즉, 파일 편집 도구는 일반적으로 승인이 필요하더라도 샌드박스 경계 내에서 파일을 수정하는 bash 명령은 프롬프트 없이 실행됩니다.

### 샌드박싱 구성

`settings.json` 파일을 통해 샌드박스 동작을 커스터마이즈하세요. 전체 구성 레퍼런스는 [설정](/en/settings#sandbox-settings)을 참조하세요.

> **팁**: 모든 명령이 샌드박싱과 즉시 호환되는 것은 아닙니다. 샌드박스를 최대한 활용하는 데 도움이 되는 몇 가지 사항:
> * 많은 CLI 도구는 특정 호스트에 접근해야 합니다. 이러한 도구를 사용하면서 특정 호스트 접근 권한을 요청할 때 허용하면 이후에도 해당 호스트에 접근할 수 있어 샌드박스 내에서 안전하게 실행됩니다.
> * `watchman`은 샌드박스 내에서 실행과 호환되지 않습니다. `jest`를 실행하는 경우 `jest --no-watchman` 사용을 고려하세요.
> * `docker`는 샌드박스 내에서 실행과 호환되지 않습니다. `docker`를 `excludedCommands`에 지정하여 샌드박스 외부에서 강제 실행하는 것을 고려하세요.

> **참고**: Claude Code에는 필요한 경우 명령이 샌드박스 외부에서 실행될 수 있도록 하는 의도적인 탈출 메커니즘이 포함되어 있습니다. 샌드박스 제한으로 명령이 실패하면(네트워크 연결 문제나 호환되지 않는 도구 등) Claude는 실패를 분석하고 `dangerouslyDisableSandbox` 매개변수로 명령을 재시도할 수 있습니다. 이 매개변수를 사용하는 명령은 사용자 권한이 필요한 일반 Claude Code 권한 흐름을 거칩니다. 이를 통해 Claude Code가 특정 도구나 네트워크 작업이 샌드박스 제약 내에서 작동할 수 없는 엣지 케이스를 처리할 수 있습니다.
>
> [샌드박스 설정](/en/settings#sandbox-settings)에서 `"allowUnsandboxedCommands": false`를 설정하여 이 탈출 메커니즘을 비활성화할 수 있습니다. 비활성화하면 `dangerouslyDisableSandbox` 매개변수가 완전히 무시되고 모든 명령은 샌드박스화되거나 `excludedCommands`에 명시적으로 나열되어야 합니다.

## 보안 이점

### 프롬프트 인젝션으로부터 보호

공격자가 프롬프트 인젝션을 통해 Claude Code의 동작을 조작하는 데 성공하더라도, 샌드박스는 시스템이 안전하게 유지되도록 보장합니다:

**파일시스템 보호:**

* `~/.bashrc`와 같은 중요 설정 파일 수정 불가
* `/bin/`의 시스템 수준 파일 수정 불가
* [Claude 권한 설정](/en/permissions#manage-permissions)에서 거부된 파일 읽기 불가

**네트워크 보호:**

* 공격자 제어 서버로 데이터 유출 불가
* 미승인 도메인에서 악성 스크립트 다운로드 불가
* 미승인 서비스에 예상치 못한 API 호출 불가
* 명시적으로 허용되지 않은 도메인에 연결 불가

**모니터링 및 제어:**

* 샌드박스 외부의 모든 접근 시도가 OS 수준에서 차단됩니다
* 경계가 테스트될 때 즉시 알림을 받습니다
* 거부, 일회 허용, 또는 구성을 영구적으로 업데이트할 수 있습니다

### 공격 면적 축소

샌드박싱은 다음으로 인한 잠재적 피해를 제한합니다:

* **악성 의존성**: 유해한 코드가 포함된 NPM 패키지나 다른 의존성
* **손상된 스크립트**: 보안 취약점이 있는 빌드 스크립트나 도구
* **소셜 엔지니어링**: 사용자를 속여 위험한 명령을 실행시키는 공격
* **프롬프트 인젝션**: Claude를 속여 위험한 명령을 실행시키는 공격

### 투명한 작동

Claude Code가 샌드박스 외부의 네트워크 리소스에 접근하려 할 때:

1. 작업이 OS 수준에서 차단됩니다
2. 즉시 알림을 받습니다
3. 다음 중 선택할 수 있습니다:
   * 요청 거부
   * 일회 허용
   * 영구적으로 허용하도록 샌드박스 구성 업데이트

## 보안 제한 사항

* 네트워크 샌드박싱 제한 사항: 네트워크 필터링 시스템은 프로세스가 연결할 수 있는 도메인을 제한하는 방식으로 작동합니다. 프록시를 통과하는 트래픽을 그 외의 방식으로는 검사하지 않으며, 사용자는 정책에서 신뢰할 수 있는 도메인만 허용하는 책임이 있습니다.

> **경고**: 사용자는 데이터 유출을 허용할 수 있는 `github.com`과 같이 광범위한 도메인을 허용할 때의 잠재적 위험을 인식해야 합니다. 또한 일부 경우 [도메인 프론팅](https://en.wikipedia.org/wiki/Domain_fronting)을 통해 네트워크 필터링을 우회할 수 있습니다.

* Unix 소켓을 통한 권한 상승: `allowUnixSockets` 구성은 의도치 않게 샌드박스 우회로 이어질 수 있는 강력한 시스템 서비스에 대한 접근을 허용할 수 있습니다. 예를 들어, `/var/run/docker.sock`에 대한 접근을 허용하면 docker 소켓을 통해 호스트 시스템에 효과적으로 접근할 수 있습니다. 사용자는 샌드박스를 통해 허용하는 Unix 소켓을 신중하게 고려하는 것이 좋습니다.
* 파일시스템 권한 상승: 지나치게 광범위한 파일시스템 쓰기 권한은 권한 상승 공격을 가능하게 할 수 있습니다. `$PATH`에 있는 실행 파일이 포함된 디렉터리, 시스템 구성 디렉터리, 또는 사용자 셸 구성 파일(`.bashrc`, `.zshrc`)에 대한 쓰기 허용은 다른 사용자나 시스템 프로세스가 이러한 파일에 접근할 때 다른 보안 컨텍스트에서 코드 실행으로 이어질 수 있습니다.
* Linux 샌드박스 강도: Linux 구현은 강력한 파일시스템 및 네트워크 격리를 제공하지만, 권한 있는 네임스페이스 없이 Docker 환경 내에서 작동하는 `enableWeakerNestedSandbox` 모드를 포함합니다. 이 옵션은 보안을 상당히 약화시키며 다른 격리 방식이 적용되는 경우에만 사용해야 합니다.

## 샌드박싱과 권한의 관계

샌드박싱과 [권한](/en/permissions)은 함께 작동하는 보완적인 보안 레이어입니다:

* **권한**은 Claude Code가 사용할 수 있는 도구를 제어하며 도구가 실행되기 전에 평가됩니다. Bash, Read, Edit, WebFetch, MCP 등 모든 도구에 적용됩니다.
* **샌드박싱**은 Bash 명령이 파일시스템 및 네트워크 수준에서 접근할 수 있는 것을 제한하는 OS 수준의 적용을 제공합니다. Bash 명령과 그 자식 프로세스에만 적용됩니다.

파일시스템 및 네트워크 제한은 샌드박스 설정이 아닌 권한 규칙을 통해 구성됩니다:

* `Read`와 `Edit` 거부 규칙을 사용하여 특정 파일이나 디렉터리에 대한 접근을 차단하세요
* `WebFetch` 허용/거부 규칙을 사용하여 도메인 접근을 제어하세요
* 샌드박스 `allowedDomains`를 사용하여 Bash 명령이 접근할 수 있는 도메인을 제어하세요

이 [저장소](https://github.com/anthropics/claude-code/tree/main/examples/settings)에는 샌드박스 전용 예시를 포함한 일반적인 배포 시나리오를 위한 시작 설정 구성이 포함되어 있습니다. 이를 출발점으로 사용하고 필요에 맞게 조정하세요.

## 고급 사용법

### 커스텀 프록시 구성

고급 네트워크 보안이 필요한 조직의 경우, 커스텀 프록시를 구현하여 다음을 수행할 수 있습니다:

* HTTPS 트래픽 복호화 및 검사
* 커스텀 필터링 규칙 적용
* 모든 네트워크 요청 로깅
* 기존 보안 인프라와 통합

```json
{
  "sandbox": {
    "network": {
      "httpProxyPort": 8080,
      "socksProxyPort": 8081
    }
  }
}
```

### 기존 보안 도구와의 통합

샌드박스 bash 도구는 다음과 함께 작동합니다:

* **권한 규칙**: 심층 방어를 위해 [권한 설정](/en/permissions)과 결합
* **개발 컨테이너**: 추가 격리를 위해 [devcontainers](/en/devcontainer)와 함께 사용
* **엔터프라이즈 정책**: [관리 설정](/en/settings#settings-precedence)을 통해 샌드박스 구성 적용

## 모범 사례

1. **제한적으로 시작**: 최소 권한으로 시작하고 필요에 따라 확장하세요
2. **로그 모니터링**: 샌드박스 위반 시도를 검토하여 Claude Code의 요구를 파악하세요
3. **환경별 구성 사용**: 개발 및 프로덕션 컨텍스트에 대한 다른 샌드박스 규칙 적용
4. **권한과 결합**: 포괄적인 보안을 위해 IAM 정책과 함께 샌드박싱 사용
5. **구성 테스트**: 샌드박스 설정이 합법적인 워크플로우를 차단하지 않는지 확인하세요

## 오픈 소스

샌드박스 런타임은 자체 에이전트 프로젝트에서 사용할 수 있는 오픈 소스 npm 패키지로 제공됩니다. 이를 통해 AI 에이전트 커뮤니티 전체가 더 안전하고 보안이 강화된 자율 시스템을 구축할 수 있습니다. 실행하려는 다른 프로그램을 샌드박스화하는 데도 사용할 수 있습니다. 예를 들어, MCP 서버를 샌드박스화하려면 다음을 실행하세요:

```bash
npx @anthropic-ai/sandbox-runtime <command-to-sandbox>
```

구현 세부 사항과 소스 코드는 [GitHub 저장소](https://github.com/anthropic-experimental/sandbox-runtime)를 방문하세요.

## 제한 사항

* **성능 오버헤드**: 최소한이지만 일부 파일시스템 작업이 약간 느릴 수 있습니다
* **호환성**: 특정 시스템 접근 패턴이 필요한 일부 도구는 구성 조정이 필요하거나 샌드박스 외부에서 실행해야 할 수도 있습니다
* **플랫폼 지원**: macOS, Linux, WSL2를 지원합니다. WSL1은 지원되지 않습니다. 네이티브 Windows 지원이 계획되어 있습니다.

## 참고 항목

* [보안](/en/security) - 포괄적인 보안 기능 및 모범 사례
* [권한](/en/permissions) - 권한 구성 및 접근 제어
* [설정](/en/settings) - 완전한 구성 레퍼런스
* [CLI 레퍼런스](/en/cli-reference) - 명령줄 옵션
