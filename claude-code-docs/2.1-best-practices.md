---
title: "Best Practices for Claude Code"
titleKo: "Claude Code 모범 사례"
description: "Tips and patterns for getting the most out of Claude Code, from configuring your environment to scaling across parallel sessions."
descriptionKo: "환경 설정부터 병렬 세션 확장까지 Claude Code를 최대한 활용하기 위한 팁과 패턴입니다."
category: "common-workflows"
sourceUrl: "https://code.claude.com/docs/en/best-practices.md"
fetchedDate: "2026-02-19"
---

# Source: https://code.claude.com/docs/en/best-practices.md

# Claude Code 모범 사례

> 환경 설정부터 병렬 세션 확장까지 Claude Code를 최대한 활용하기 위한 팁과 패턴입니다.

Claude Code는 에이전트 코딩 환경입니다. 질문에 답하고 기다리는 챗봇과 달리, Claude Code는 파일을 읽고, 명령어를 실행하고, 변경을 수행하며, 여러분이 보거나, 방향을 바꾸거나, 완전히 자리를 비운 상태에서도 자율적으로 문제를 해결할 수 있습니다.

이는 작업 방식을 바꿉니다. 코드를 직접 작성하고 Claude에게 검토를 요청하는 대신, 원하는 것을 설명하면 Claude가 구축 방법을 파악합니다. Claude는 탐색하고, 계획하고, 구현합니다.

하지만 이러한 자율성에도 이해해야 할 학습 곡선이 존재합니다. Claude는 여러분이 이해해야 할 특정 제약 조건 내에서 작동합니다.

이 가이드는 Anthropic의 내부 팀과 다양한 코드베이스, 언어, 환경에서 Claude Code를 사용하는 엔지니어들에게 효과적으로 입증된 패턴을 다룹니다.

---

대부분의 모범 사례는 하나의 제약 조건에 기반합니다: **Claude의 컨텍스트 창이 빠르게 채워지고, 채워질수록 성능이 저하됩니다.**

Claude의 컨텍스트 창은 모든 메시지, Claude가 읽은 모든 파일, 모든 명령 출력을 포함한 전체 대화를 담고 있습니다. 그러나 이것은 빠르게 채워질 수 있습니다. 단일 디버깅 세션이나 코드베이스 탐색만으로도 수만 개의 토큰을 생성하고 소비할 수 있습니다.

LLM 성능은 컨텍스트가 채워지면서 저하되기 때문에 이는 중요합니다. 컨텍스트 창이 꽉 차가면 Claude가 이전 지시를 "잊어버리거나" 더 많은 실수를 저지르기 시작할 수 있습니다. 컨텍스트 창은 관리해야 할 가장 중요한 리소스입니다. 커스텀 상태 표시줄로 컨텍스트 사용량을 지속적으로 추적하고, 토큰 사용량 줄이기 전략을 참조하세요.

---

## Claude에게 작업을 검증할 방법 제공하기

> 테스트, 스크린샷, 또는 예상 출력을 포함하여 Claude가 스스로 확인할 수 있도록 하세요. 이것이 여러분이 할 수 있는 가장 높은 효과를 내는 단일 행동입니다.

Claude는 자신의 작업을 검증할 수 있을 때 훨씬 더 잘 수행합니다. 예를 들어 테스트 실행, 스크린샷 비교, 출력 검증 등이 있습니다.

명확한 성공 기준 없이는, 올바르게 보이지만 실제로 작동하지 않는 것을 생성할 수 있습니다. 여러분이 유일한 피드백 루프가 되며, 모든 실수가 여러분의 주의를 필요로 합니다.

| 전략                              | 이전                                                  | 이후                                                                                                                                                                                                     |
| ------------------------------------- | ------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **검증 기준 제공**     | *"implement a function that validates email addresses"* | *"write a validateEmail function. example test cases: user@example.com is true, invalid is false, user@.com is false. run the tests after implementing"*                                                 |
| **UI 변경 시각적으로 검증**        | *"make the dashboard look better"*                      | *"[paste screenshot] implement this design. take a screenshot of the result and compare it to the original. list differences and fix them"*                                                              |
| **증상이 아닌 근본 원인 해결** | *"the build is failing"*                                | *"the build fails with this error: [paste error]. fix it and verify the build succeeds. address the root cause, don't suppress the error"*                                                              |

UI 변경 사항은 Claude in Chrome 확장 프로그램을 사용하여 검증할 수 있습니다. 검증은 테스트 스위트, 린터, 또는 출력을 확인하는 Bash 명령어일 수도 있습니다.

---

## 먼저 탐색하고, 계획하고, 그다음 코딩하기

> 잘못된 문제를 해결하지 않으려면 연구와 계획을 구현에서 분리하세요.

Claude가 바로 코딩으로 뛰어들게 하면 잘못된 문제를 해결하는 코드를 생성할 수 있습니다. Plan Mode를 사용하여 탐색을 실행에서 분리하세요.

권장 워크플로우는 네 단계로 구성됩니다:

### 1단계: 탐색

Plan Mode를 시작합니다. Claude는 변경 없이 파일을 읽고 질문에 답합니다.

```
read /src/auth and understand how we handle sessions and login.
also look at how we manage environment variables for secrets.
```

### 2단계: 계획

Claude에게 상세한 구현 계획 수립을 요청합니다.

```
I want to add Google OAuth. What files need to change?
What's the session flow? Create a plan.
```

`Ctrl+G`를 눌러 Claude가 진행하기 전에 텍스트 편집기에서 계획을 열어 직접 편집할 수 있습니다.

### 3단계: 구현

일반 모드로 돌아와 Claude가 계획에 따라 코딩하고 검증하도록 합니다.

```
implement the OAuth flow from your plan. write tests for the
callback handler, run the test suite and fix any failures.
```

### 4단계: 커밋

Claude에게 설명적인 메시지와 함께 커밋하고 PR을 생성하도록 요청합니다.

```
commit with a descriptive message and open a PR
```

> **주의**: Plan Mode는 유용하지만 오버헤드도 추가됩니다. 범위가 명확하고 수정이 작은 작업 (오타 수정, 로그 줄 추가, 변수 이름 변경 등)의 경우 Claude에게 직접 수행하도록 요청하세요. 계획은 접근 방식이 불확실하거나, 변경이 여러 파일을 수정하거나, 수정 중인 코드에 익숙하지 않을 때 가장 유용합니다.

---

## 프롬프트에 구체적인 컨텍스트 제공하기

> 지시가 구체적일수록 수정이 적게 필요합니다.

Claude는 의도를 추론할 수 있지만 마음을 읽지는 못합니다. 특정 파일을 참조하고, 제약 조건을 언급하고, 예시 패턴을 지적하세요.

| 전략                                                                                         | 이전                                               | 이후                                                                                                                                                                                                                                                                                                                                                             |
| ------------------------------------------------------------------------------------------------ | ---------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **작업 범위 지정.** 파일, 시나리오, 테스트 선호도를 지정하세요.                  | *"add tests for foo.py"*                             | *"write a test for foo.py covering the edge case where the user is logged out. avoid mocks."*                                                                                                                                                                                                                                                                    |
| **출처 지정.** Claude를 질문에 답할 수 있는 출처로 안내하세요.                    | *"why does ExecutionFactory have such a weird api?"* | *"look through ExecutionFactory's git history and summarize how its api came to be"*                                                                                                                                                                                                                                                                             |
| **기존 패턴 참조.** Claude를 코드베이스의 패턴으로 안내하세요.                      | *"add a calendar widget"*                            | *"look at how existing widgets are implemented on the home page to understand the patterns. HotDogWidget.php is a good example. follow the pattern to implement a new calendar widget that lets the user select a month and paginate forwards/backwards to pick a year. build from scratch without libraries other than the ones already used in the codebase."* |
| **증상 설명.** 증상, 예상 위치, "수정된" 상태가 어떤 것인지 제공하세요. | *"fix the login bug"*                                | *"users report that login fails after session timeout. check the auth flow in src/auth/, especially token refresh. write a failing test that reproduces the issue, then fix it"*                                                                                                                                                                                 |

과정을 수정하면서 탐색할 때는 모호한 프롬프트도 유용할 수 있습니다. `"what would you improve in this file?"`과 같은 프롬프트는 생각하지 못했던 것들을 드러낼 수 있습니다.

### 풍부한 콘텐츠 제공하기

> `@`로 파일을 참조하거나, 스크린샷/이미지를 붙여넣거나, 데이터를 직접 파이프하세요.

여러 가지 방법으로 Claude에게 풍부한 데이터를 제공할 수 있습니다:

- **`@`로 파일 참조** - 코드가 어디 있는지 설명하는 대신. Claude는 응답하기 전에 파일을 읽습니다.
- **이미지 직접 붙여넣기**. 이미지를 복사/붙여넣기하거나 드래그 앤 드롭으로 프롬프트에 추가하세요.
- **URL 제공** - 문서 및 API 참조용. `/permissions`를 사용하여 자주 사용하는 도메인을 허용 목록에 추가하세요.
- **데이터 파이프** - `cat error.log | claude`를 실행하여 파일 내용을 직접 전송하세요.
- **Claude가 필요한 것을 가져오도록 허용**. Claude에게 Bash 명령어, MCP 도구, 또는 파일 읽기를 사용하여 스스로 컨텍스트를 가져오도록 알리세요.

---

## 환경 설정하기

몇 가지 설정 단계로 Claude Code를 모든 세션에서 훨씬 더 효과적으로 만들 수 있습니다.

### 효과적인 CLAUDE.md 작성하기

> `/init`을 실행하여 현재 프로젝트 구조를 기반으로 시작 CLAUDE.md 파일을 생성한 다음 시간이 지나면서 개선하세요.

CLAUDE.md는 모든 대화 시작 시 Claude가 읽는 특수 파일입니다. Bash 명령어, 코드 스타일, 워크플로우 규칙을 포함하세요. 이것은 Claude에게 **코드만으로는 추론할 수 없는** 지속적인 컨텍스트를 제공합니다.

`/init` 명령은 빌드 시스템, 테스트 프레임워크, 코드 패턴을 감지하기 위해 코드베이스를 분석하여 개선할 견고한 기반을 제공합니다.

CLAUDE.md 파일에 필요한 형식은 없지만, 짧고 사람이 읽기 쉽게 유지하세요. 예시:

```markdown
# Code style
- Use ES modules (import/export) syntax, not CommonJS (require)
- Destructure imports when possible (eg. import { foo } from 'bar')

# Workflow
- Be sure to typecheck when you're done making a series of code changes
- Prefer running single tests, and not the whole test suite, for performance
```

CLAUDE.md는 매 세션마다 로드되므로 광범위하게 적용되는 항목만 포함하세요. 가끔만 관련된 도메인 지식이나 워크플로우는 스킬을 사용하세요.

간결하게 유지하세요. 각 줄에 대해 *"이것을 제거하면 Claude가 실수를 하게 될까?"*를 자문하세요. 그렇지 않다면 삭제하거나 훅으로 변환하세요. 부풀려진 CLAUDE.md 파일은 Claude가 실제 지시를 무시하게 합니다!

| 포함할 내용                                           | 제외할 내용                                            |
| ------------------------------------------------- | -------------------------------------------------- |
| Claude가 추측할 수 없는 Bash 명령어                  | Claude가 코드 읽기로 파악할 수 있는 것     |
| 기본값과 다른 코드 스타일 규칙        | Claude가 이미 아는 표준 언어 관행 |
| 테스트 지침 및 선호하는 테스트 실행기   | 상세한 API 문서 (대신 링크 제공)  |
| 저장소 에티켓 (브랜치 명명, PR 관행) | 자주 변경되는 정보             |
| 프로젝트 특정 아키텍처 결정  | 긴 설명이나 튜토리얼                     |
| 개발자 환경 특이사항 (필요한 환경 변수)  | 코드베이스의 파일별 설명          |
| 일반적인 함정이나 명확하지 않은 동작           | "클린 코드 작성"과 같은 자명한 관행     |

CLAUDE.md 파일은 `@path/to/import` 구문을 사용하여 추가 파일을 가져올 수 있습니다:

```markdown
See @README.md for project overview and @package.json for available npm commands.

# Additional Instructions
- Git workflow: @docs/git-instructions.md
- Personal overrides: @~/.claude/my-project-instructions.md
```

CLAUDE.md 파일을 여러 위치에 배치할 수 있습니다:

- **홈 폴더 (`~/.claude/CLAUDE.md`)**: 모든 Claude 세션에 적용
- **프로젝트 루트 (`./CLAUDE.md`)**: 팀과 공유하기 위해 git에 체크인
- **상위 디렉토리**: 모노레포에 유용
- **하위 디렉토리**: Claude는 요청 시 하위 CLAUDE.md 파일을 가져옵니다

### 권한 설정하기

> `/permissions`를 사용하여 안전한 명령어를 허용 목록에 추가하거나 OS 수준 격리를 위해 `/sandbox`를 사용하세요. 이는 여러분이 제어권을 유지하면서 중단을 줄입니다.

기본적으로 Claude Code는 시스템을 수정할 수 있는 작업에 대해 권한을 요청합니다. 이러한 중단을 줄이는 두 가지 방법이 있습니다:

- **권한 허용 목록**: 안전하다는 것을 아는 특정 도구 허용 (예: `npm run lint` 또는 `git commit`)
- **샌드박싱**: 파일 시스템 및 네트워크 접근을 제한하는 OS 수준 격리 활성화

또는 린트 오류 수정이나 보일러플레이트 생성과 같이 포함된 워크플로우에서 모든 권한 검사를 우회하려면 `--dangerously-skip-permissions`를 사용하세요.

> **경고**: Claude가 임의의 명령어를 실행하도록 허용하면 데이터 손실, 시스템 손상, 또는 프롬프트 인젝션을 통한 데이터 유출이 발생할 수 있습니다. 인터넷 접근 없는 샌드박스에서만 `--dangerously-skip-permissions`를 사용하세요.

### CLI 도구 사용하기

> Claude Code에게 외부 서비스와 상호작용할 때 `gh`, `aws`, `gcloud`, `sentry-cli`와 같은 CLI 도구를 사용하도록 알리세요.

CLI 도구는 외부 서비스와 상호작용하는 가장 컨텍스트 효율적인 방법입니다. GitHub를 사용한다면 `gh` CLI를 설치하세요. Claude는 이슈 생성, pull request 열기, 댓글 읽기에 이를 사용하는 방법을 알고 있습니다.

Claude는 이미 알지 못하는 CLI 도구를 배우는 데도 효과적입니다. `Use 'foo-cli-tool --help' to learn about foo tool, then use it to solve A, B, C.`와 같은 프롬프트를 시도해보세요.

### MCP 서버 연결하기

> `claude mcp add`를 실행하여 Notion, Figma, 또는 데이터베이스와 같은 외부 도구를 연결하세요.

MCP 서버를 통해 Claude에게 이슈 트래커의 기능을 구현하고, 데이터베이스를 쿼리하고, 모니터링 데이터를 분석하고, Figma의 디자인을 통합하고, 워크플로우를 자동화하도록 요청할 수 있습니다.

### 훅 설정하기

> 예외 없이 매번 발생해야 하는 작업에는 훅을 사용하세요.

훅은 Claude의 워크플로우 특정 지점에서 스크립트를 자동으로 실행합니다. 권고적인 CLAUDE.md 지시와 달리, 훅은 결정론적이며 작업이 발생하는 것을 보장합니다.

Claude가 여러분을 위해 훅을 작성할 수 있습니다. *"Write a hook that runs eslint after every file edit"* 또는 *"Write a hook that blocks writes to the migrations folder."*와 같은 프롬프트를 시도해보세요. 인터랙티브 구성을 위해 `/hooks`를 실행하세요.

### 스킬 생성하기

> `.claude/skills/`에 `SKILL.md` 파일을 생성하여 Claude에게 도메인 지식과 재사용 가능한 워크플로우를 제공하세요.

스킬은 프로젝트, 팀, 또는 도메인에 특정한 정보로 Claude의 지식을 확장합니다. Claude는 관련될 때 자동으로 적용하거나, `/skill-name`으로 직접 호출할 수 있습니다.

`.claude/skills/`에 `SKILL.md`가 있는 디렉토리를 추가하여 스킬을 생성합니다:

```markdown
---
name: api-conventions
description: REST API design conventions for our services
---
# API Conventions
- Use kebab-case for URL paths
- Use camelCase for JSON properties
- Always include pagination for list endpoints
- Version APIs in the URL path (/v1/, /v2/)
```

스킬은 직접 호출하는 반복 가능한 워크플로우를 정의할 수도 있습니다:

```markdown
---
name: fix-issue
description: Fix a GitHub issue
disable-model-invocation: true
---
Analyze and fix the GitHub issue: $ARGUMENTS.

1. Use `gh issue view` to get the issue details
2. Understand the problem described in the issue
3. Search the codebase for relevant files
4. Implement the necessary changes to fix the issue
5. Write and run tests to verify the fix
6. Ensure code passes linting and type checking
7. Create a descriptive commit message
8. Push and create a PR
```

`/fix-issue 1234`로 호출합니다.

### 커스텀 서브에이전트 생성하기

> `.claude/agents/`에 전문화된 보조자를 정의하여 Claude가 격리된 작업을 위임할 수 있도록 하세요.

서브에이전트는 허용된 도구의 고유한 집합과 함께 자체 컨텍스트에서 실행됩니다. 많은 파일을 읽거나 주요 대화를 혼잡하게 만들지 않으면서 전문화된 집중을 필요로 하는 작업에 유용합니다.

```markdown
---
name: security-reviewer
description: Reviews code for security vulnerabilities
tools: Read, Grep, Glob, Bash
model: opus
---
You are a senior security engineer. Review code for:
- Injection vulnerabilities (SQL, XSS, command injection)
- Authentication and authorization flaws
- Secrets or credentials in code
- Insecure data handling

Provide specific line references and suggested fixes.
```

Claude에게 서브에이전트를 명시적으로 사용하도록 알리세요: *"Use a subagent to review this code for security issues."*

### 플러그인 설치하기

> `/plugin`을 실행하여 마켓플레이스를 탐색하세요. 플러그인은 구성 없이 스킬, 도구, 통합을 추가합니다.

플러그인은 스킬, 훅, 서브에이전트, MCP 서버를 단일 설치 가능한 단위로 묶습니다. 타입이 있는 언어로 작업하는 경우, Claude에게 정확한 심볼 탐색과 편집 후 자동 오류 감지 기능을 제공하는 코드 인텔리전스 플러그인을 설치하세요.

---

## 효과적으로 소통하기

### 코드베이스 질문하기

> 시니어 엔지니어에게 할 법한 질문을 Claude에게 하세요.

새 코드베이스에 온보딩할 때 학습과 탐색을 위해 Claude Code를 사용하세요:

- 로깅은 어떻게 작동합니까?
- 새 API 엔드포인트를 어떻게 만들 수 있습니까?
- `foo.rs` 134번째 줄의 `async move { ... }`는 무엇을 합니까?
- `CustomerOnboardingFlowImpl`은 어떤 에지 케이스를 처리합니까?
- 왜 이 코드는 333번째 줄에서 `bar()` 대신 `foo()`를 호출합니까?

### Claude가 인터뷰하도록 하기

> 더 큰 기능을 위해 먼저 Claude가 여러분을 인터뷰하도록 하세요. 최소한의 프롬프트로 시작하고 Claude에게 `AskUserQuestion` 도구를 사용하여 인터뷰하도록 요청하세요.

Claude는 아직 고려하지 못했을 수 있는 기술적 구현, UI/UX, 에지 케이스, 트레이드오프 등에 대해 질문합니다.

```
I want to build [brief description]. Interview me in detail using the AskUserQuestion tool.

Ask about technical implementation, UI/UX, edge cases, concerns, and tradeoffs. Don't ask obvious questions, dig into the hard parts I might not have considered.

Keep interviewing until we've covered everything, then write a complete spec to SPEC.md.
```

명세가 완성되면 새로운 세션을 시작하여 실행합니다.

---

## 세션 관리하기

대화는 지속적이며 되돌릴 수 있습니다. 이를 장점으로 활용하세요!

### 일찍 그리고 자주 방향 수정하기

> Claude가 잘못된 방향으로 가고 있다고 인식하면 즉시 수정하세요.

최선의 결과는 긴밀한 피드백 루프에서 나옵니다. Claude가 때로는 첫 번째 시도에서 완벽하게 문제를 해결하지만, 빠르게 수정하면 일반적으로 더 나은 솔루션을 더 빨리 생성합니다.

- **`Esc`**: 진행 중인 Claude를 중지합니다. 컨텍스트는 보존되어 방향을 바꿀 수 있습니다.
- **`Esc + Esc` 또는 `/rewind`**: 이전 대화 및 코드 상태 복원, 또는 선택한 메시지에서 요약합니다.
- **`"Undo that"`**: Claude가 변경 사항을 되돌리도록 합니다.
- **`/clear`**: 관련 없는 작업 사이에 컨텍스트를 초기화합니다.

한 세션에서 동일한 문제에 대해 두 번 이상 Claude를 수정했다면, 컨텍스트가 실패한 접근 방식으로 가득 찬 것입니다. `/clear`를 실행하고 더 구체적인 프롬프트로 새로 시작하세요.

### 컨텍스트 적극적으로 관리하기

> 관련 없는 작업 사이에 `/clear`를 실행하여 컨텍스트를 초기화하세요.

Claude Code는 컨텍스트 한계에 가까워지면 대화 기록을 자동으로 압축합니다.

- 작업 사이에 컨텍스트 창을 완전히 초기화하기 위해 `/clear`를 자주 사용하세요
- 자동 압축이 트리거되면 Claude는 가장 중요한 것을 요약합니다
- 더 많은 제어를 위해 `/compact <instructions>`를 실행하세요. 예: `/compact Focus on the API changes`
- 대화의 일부만 압축하려면 `Esc + Esc` 또는 `/rewind`를 사용하고, 메시지 체크포인트를 선택한 다음 **Summarize from here**를 선택하세요
- `"When compacting, always preserve the full list of modified files and any test commands"`와 같은 지시로 CLAUDE.md에서 압축 동작을 사용자 정의하세요

### 조사에 서브에이전트 사용하기

> `"use subagents to investigate X"`로 연구를 위임하세요. 서브에이전트는 별도의 컨텍스트에서 탐색하여 구현을 위한 주요 대화를 깔끔하게 유지합니다.

컨텍스트가 근본적인 제약이기 때문에 서브에이전트는 사용 가능한 가장 강력한 도구 중 하나입니다. Claude가 코드베이스를 조사할 때 많은 파일을 읽으며, 이 모두가 컨텍스트를 소비합니다. 서브에이전트는 별도의 컨텍스트 창에서 실행되고 요약을 보고합니다:

```
Use subagents to investigate how our authentication system handles token
refresh, and whether we have any existing OAuth utilities I should reuse.
```

Claude가 무언가를 구현한 후 검증을 위해 서브에이전트를 사용할 수도 있습니다:

```
use a subagent to review this code for edge cases
```

### 체크포인트로 되감기

> Claude의 모든 작업은 체크포인트를 생성합니다. 대화, 코드, 또는 둘 다를 이전 체크포인트로 복원할 수 있습니다.

Claude는 변경 전에 자동으로 체크포인트를 생성합니다. `Escape`를 두 번 누르거나 `/rewind`를 실행하여 되감기 메뉴를 엽니다. 대화만 복원, 코드만 복원, 둘 다 복원, 또는 선택한 메시지에서 요약할 수 있습니다.

모든 움직임을 세심하게 계획하는 대신, Claude에게 위험한 것을 시도하도록 할 수 있습니다. 작동하지 않으면 되감고 다른 접근 방식을 시도하세요. 체크포인트는 세션 간에 유지됩니다.

> 체크포인트는 *Claude가 만든* 변경 사항만 추적하며, 외부 프로세스는 추적하지 않습니다. 이것은 git의 대체품이 아닙니다.

### 대화 재개하기

> `claude --continue`로 중단한 곳에서 계속하거나, `--resume`으로 최근 세션을 선택하세요.

```bash
claude --continue    # 가장 최근 대화 재개
claude --resume      # 최근 대화에서 선택
```

`/rename`을 사용하여 세션에 나중에 찾기 쉬운 설명적인 이름 (`"oauth-migration"`, `"debugging-memory-leak"`)을 지정하세요.

---

## 자동화 및 확장하기

하나의 Claude로 효과적이 되면 병렬 세션, 헤드리스 모드, 팬아웃 패턴으로 출력을 배가시키세요.

### 헤드리스 모드 실행하기

> CI, 사전 커밋 훅, 또는 스크립트에서 `claude -p "prompt"`를 사용하세요. 스트리밍 JSON 출력을 위해 `--output-format stream-json`을 추가하세요.

`claude -p "your prompt"`로 인터랙티브 세션 없이 Claude를 헤드리스로 실행할 수 있습니다.

```bash
# 일회성 쿼리
claude -p "Explain what this project does"

# 스크립트를 위한 구조화된 출력
claude -p "List all API endpoints" --output-format json

# 실시간 처리를 위한 스트리밍
claude -p "Analyze this log file" --output-format stream-json
```

### 여러 Claude 세션 실행하기

> 개발 속도를 높이고, 격리된 실험을 실행하거나, 복잡한 워크플로우를 시작하기 위해 여러 Claude 세션을 병렬로 실행하세요.

병렬 세션을 실행하는 세 가지 주요 방법이 있습니다:

- **Claude Code 데스크탑 앱**: 여러 로컬 세션을 시각적으로 관리합니다. 각 세션은 격리된 워크트리를 가집니다.
- **웹의 Claude Code**: Anthropic의 안전한 클라우드 인프라의 격리된 VM에서 실행합니다.
- **에이전트 팀**: 공유 작업, 메시지, 팀 리더와 함께 여러 세션의 자동화된 조정.

예를 들어, 작성자/검토자 패턴을 사용하세요:

| 세션 A (작성자)                                                      | 세션 B (검토자)                                                                                                                                                     |
| ----------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| `Implement a rate limiter for our API endpoints`                        |                                                                                                                                                                          |
|                                                                         | `Review the rate limiter implementation in @src/middleware/rateLimiter.ts. Look for edge cases, race conditions, and consistency with our existing middleware patterns.` |
| `Here's the review feedback: [Session B output]. Address these issues.` |                                                                                                                                                                          |

### 파일에 걸쳐 팬아웃하기

> 각 작업에 대해 `claude -p`를 호출하는 루프를 실행하세요. 배치 작업에 대한 권한 범위를 지정하려면 `--allowedTools`를 사용하세요.

대규모 마이그레이션이나 분석의 경우, 많은 병렬 Claude 호출에 걸쳐 작업을 분산시킬 수 있습니다:

**1단계: 작업 목록 생성**

Claude에게 마이그레이션이 필요한 모든 파일을 나열하도록 합니다 (예: `list all 2,000 Python files that need migrating`)

**2단계: 목록을 반복하는 스크립트 작성**

```bash
for file in $(cat files.txt); do
  claude -p "Migrate $file from React to Vue. Return OK or FAIL." \
    --allowedTools "Edit,Bash(git commit *)"
done
```

**3단계: 몇 개 파일로 테스트한 후 전체 규모로 실행**

처음 2-3개 파일에서 잘못된 부분을 기반으로 프롬프트를 개선한 다음, 전체 집합에서 실행하세요.

기존 데이터/처리 파이프라인에 Claude를 통합할 수도 있습니다:

```bash
claude -p "<your prompt>" --output-format json | your_command
```

### 안전한 자율 모드

`claude --dangerously-skip-permissions`를 사용하여 모든 권한 검사를 우회하고 Claude가 중단 없이 작업하도록 합니다. 이는 린트 오류 수정이나 보일러플레이트 코드 생성과 같은 워크플로우에 잘 작동합니다.

> **경고**: Claude가 임의의 명령어를 실행하도록 허용하면 위험하며 데이터 손실, 시스템 손상, 또는 데이터 유출이 발생할 수 있습니다. 이러한 위험을 최소화하려면 인터넷 접근 없는 컨테이너에서 `--dangerously-skip-permissions`를 사용하세요. 샌드박싱이 활성화되면 (`/sandbox`), 더 나은 보안으로 유사한 자율성을 얻을 수 있습니다.

---

## 일반적인 실패 패턴 피하기

이것들은 흔한 실수입니다. 일찍 인식하면 시간을 절약할 수 있습니다:

- **주방 개수대 세션.** 하나의 작업으로 시작했다가, 관련 없는 것을 물어보고, 첫 번째 작업으로 돌아갑니다. 컨텍스트가 관련 없는 정보로 가득 찹니다.
  > **수정**: 관련 없는 작업 사이에 `/clear`를 사용하세요.
- **반복적인 수정.** Claude가 뭔가 잘못하고, 수정하고, 여전히 잘못하고, 다시 수정합니다.
  > **수정**: 두 번의 수정이 실패한 후 `/clear`를 사용하고 배운 것을 포함한 더 나은 초기 프롬프트를 작성하세요.
- **과도하게 지정된 CLAUDE.md.** CLAUDE.md가 너무 길면 중요한 규칙이 노이즈에 묻혀 Claude가 절반을 무시합니다.
  > **수정**: 무자비하게 제거하세요. Claude가 지시 없이 이미 올바르게 수행하면 삭제하거나 훅으로 변환하세요.
- **신뢰 후 검증 격차.** Claude가 에지 케이스를 처리하지 않는 그럴듯한 구현을 생성합니다.
  > **수정**: 항상 검증을 제공하세요 (테스트, 스크립트, 스크린샷). 검증할 수 없다면 배포하지 마세요.
- **무한한 탐색.** 범위 없이 무언가를 "조사"하도록 요청합니다. Claude가 수백 개의 파일을 읽어 컨텍스트를 채웁니다.
  > **수정**: 탐색 범위를 좁히거나 서브에이전트를 사용하여 탐색이 주요 컨텍스트를 소비하지 않도록 하세요.

---

## 직관 개발하기

이 가이드의 패턴은 정해진 것이 아닙니다. 일반적으로 잘 작동하는 출발점이지만, 모든 상황에 최적이지 않을 수 있습니다.

하나의 복잡한 문제에 깊이 들어가 있고 기록이 가치 있기 때문에 컨텍스트가 축적되도록 *해야* 할 때도 있습니다. 작업이 탐색적이기 때문에 계획을 건너뛰고 Claude가 파악하도록 해야 할 때도 있습니다. Claude가 문제를 어떻게 해석하는지 보고 싶을 때 모호한 프롬프트가 정확히 맞을 때도 있습니다.

무엇이 효과가 있는지 주의를 기울이세요. Claude가 훌륭한 출력을 생성할 때, 여러분이 한 것을 주목하세요: 프롬프트 구조, 제공한 컨텍스트, 있었던 모드. Claude가 어려움을 겪을 때 이유를 물어보세요. 컨텍스트가 너무 노이지했나요? 프롬프트가 너무 모호했나요? 작업이 한 번에 하기에 너무 컸나요?

## 관련 리소스

- **Claude Code 작동 방식**: 에이전트 루프, 도구, 컨텍스트 관리 이해
- **Claude Code 확장**: 스킬, 훅, MCP, 서브에이전트, 플러그인 중에서 선택
- **일반 워크플로우**: 디버깅, 테스트, PR 등을 위한 단계별 레시피
- **CLAUDE.md**: 프로젝트 관행 및 지속적인 컨텍스트 저장
