---
title: "Claude Code on Amazon Bedrock"
titleKo: "Amazon Bedrock 통합"
description: "Learn about configuring Claude Code through Amazon Bedrock, including setup, IAM configuration, and troubleshooting."
descriptionKo: "설정, IAM 구성, 문제 해결을 포함하여 Amazon Bedrock을 통해 Claude Code를 구성하는 방법을 알아봅니다."
category: "third-party"
sourceUrl: "https://code.claude.com/docs/en/amazon-bedrock.md"
fetchedDate: "2026-02-19"
---

# Source: https://code.claude.com/docs/en/amazon-bedrock.md

# Amazon Bedrock 통합

> 설정, IAM 구성, 문제 해결을 포함하여 Amazon Bedrock을 통해 Claude Code를 구성하는 방법을 알아봅니다.

## 사전 요구 사항

Bedrock으로 Claude Code를 구성하기 전에 다음이 필요합니다.

* Bedrock 액세스가 활성화된 AWS 계정
* Bedrock에서 원하는 Claude 모델 액세스 (예: Claude Sonnet 4.6)
* AWS CLI 설치 및 구성 (선택 사항 - 자격 증명을 가져오는 다른 메커니즘이 없는 경우에만 필요)
* 적절한 IAM 권한

## 설정

### 1. 사용 사례 세부 정보 제출

Anthropic 모델을 처음 사용하는 경우 모델을 호출하기 전에 사용 사례 세부 정보를 제출해야 합니다. 이는 계정당 한 번만 수행됩니다.

1. 올바른 IAM 권한이 있는지 확인합니다 (아래 세부 정보 참조)
2. [Amazon Bedrock 콘솔](https://console.aws.amazon.com/bedrock/)로 이동
3. **Chat/Text playground** 선택
4. Anthropic 모델을 선택하면 사용 사례 양식을 작성하라는 메시지가 표시됩니다.

### 2. AWS 자격 증명 구성

Claude Code는 기본 AWS SDK 자격 증명 체인을 사용합니다. 다음 방법 중 하나를 사용하여 자격 증명을 설정하세요.

**옵션 A: AWS CLI 구성**

```bash
aws configure
```

**옵션 B: 환경 변수 (액세스 키)**

```bash
export AWS_ACCESS_KEY_ID=your-access-key-id
export AWS_SECRET_ACCESS_KEY=your-secret-access-key
export AWS_SESSION_TOKEN=your-session-token
```

**옵션 C: 환경 변수 (SSO 프로파일)**

```bash
aws sso login --profile=<your-profile-name>

export AWS_PROFILE=your-profile-name
```

**옵션 D: AWS Management Console 자격 증명**

```bash
aws login
```

**옵션 E: Bedrock API 키**

```bash
export AWS_BEARER_TOKEN_BEDROCK=your-bedrock-api-key
```

Bedrock API 키는 전체 AWS 자격 증명 없이도 간단한 인증 방법을 제공합니다. [Bedrock API 키에 대해 자세히 알아보세요](https://aws.amazon.com/blogs/machine-learning/accelerate-ai-development-with-amazon-bedrock-api-keys/).

#### 고급 자격 증명 구성

Claude Code는 AWS SSO 및 기업 ID 공급자에 대한 자동 자격 증명 갱신을 지원합니다. 이 설정을 Claude Code 설정 파일에 추가하세요 (파일 위치는 [설정](/en/settings) 참조).

Claude Code가 AWS 자격 증명이 만료된 것을 감지하면 (타임스탬프 기반으로 로컬에서 감지하거나 Bedrock이 자격 증명 오류를 반환할 때), 요청을 재시도하기 전에 구성된 `awsAuthRefresh` 및/또는 `awsCredentialExport` 명령을 자동으로 실행하여 새 자격 증명을 가져옵니다.

##### 구성 예시

```json
{
  "awsAuthRefresh": "aws sso login --profile myprofile",
  "env": {
    "AWS_PROFILE": "myprofile"
  }
}
```

##### 구성 설정 설명

**`awsAuthRefresh`**: 자격 증명, SSO 캐시 또는 구성 파일 업데이트와 같이 `.aws` 디렉토리를 수정하는 명령에 사용합니다. 명령의 출력이 사용자에게 표시되지만 대화형 입력은 지원되지 않습니다. CLI가 URL 또는 코드를 표시하고 브라우저에서 인증을 완료하는 브라우저 기반 SSO 흐름에 적합합니다.

**`awsCredentialExport`**: `.aws`를 수정할 수 없고 자격 증명을 직접 반환해야 하는 경우에만 사용합니다. 출력은 자동으로 캡처되며 사용자에게 표시되지 않습니다. 명령은 다음 형식으로 JSON을 출력해야 합니다.

```json
{
  "Credentials": {
    "AccessKeyId": "value",
    "SecretAccessKey": "value",
    "SessionToken": "value"
  }
}
```

### 3. Claude Code 구성

Bedrock을 활성화하려면 다음 환경 변수를 설정하세요.

```bash
# Bedrock 통합 활성화
export CLAUDE_CODE_USE_BEDROCK=1
export AWS_REGION=us-east-1  # 또는 선호하는 리전

# 선택 사항: 소형/빠른 모델 (Haiku)의 리전 재정의
export ANTHROPIC_SMALL_FAST_MODEL_AWS_REGION=us-west-2
```

Claude Code에서 Bedrock을 활성화할 때 다음 사항에 유의하세요.

* `AWS_REGION`은 필수 환경 변수입니다. Claude Code는 이 설정을 위해 `.aws` 구성 파일을 읽지 않습니다.
* Bedrock을 사용할 때 인증은 AWS 자격 증명을 통해 처리되므로 `/login` 및 `/logout` 명령이 비활성화됩니다.
* 다른 프로세스에 누출하고 싶지 않은 `AWS_PROFILE`과 같은 환경 변수에는 설정 파일을 사용할 수 있습니다. 자세한 내용은 [설정](/en/settings)을 참조하세요.

### 4. 모델 구성

Claude Code는 Bedrock에서 다음 기본 모델을 사용합니다.

| 모델 유형 | 기본값 |
|:-----------|:--------------|
| 기본 모델 | `global.anthropic.claude-sonnet-4-6` |
| 소형/빠른 모델 | `us.anthropic.claude-haiku-4-5-20251001-v1:0` |

> Bedrock 사용자의 경우 Claude Code는 Haiku 3.5에서 Haiku 4.5로 자동 업그레이드되지 않습니다. 최신 Haiku 모델로 수동 전환하려면 `ANTHROPIC_DEFAULT_HAIKU_MODEL` 환경 변수를 전체 모델 이름으로 설정하세요 (예: `us.anthropic.claude-haiku-4-5-20251001-v1:0`).

모델을 사용자 지정하려면 다음 방법 중 하나를 사용하세요.

```bash
# 추론 프로파일 ID 사용
export ANTHROPIC_MODEL='global.anthropic.claude-sonnet-4-6'
export ANTHROPIC_SMALL_FAST_MODEL='us.anthropic.claude-haiku-4-5-20251001-v1:0'

# 애플리케이션 추론 프로파일 ARN 사용
export ANTHROPIC_MODEL='arn:aws:bedrock:us-east-2:your-account-id:application-inference-profile/your-model-id'

# 선택 사항: 필요한 경우 프롬프트 캐싱 비활성화
export DISABLE_PROMPT_CACHING=1
```

> [프롬프트 캐싱](https://platform.claude.com/docs/en/build-with-claude/prompt-caching)은 모든 리전에서 사용 가능하지 않을 수 있습니다.

## IAM 구성

Claude Code에 필요한 권한으로 IAM 정책을 생성하세요.

```json
{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Sid": "AllowModelAndInferenceProfileAccess",
      "Effect": "Allow",
      "Action": [
        "bedrock:InvokeModel",
        "bedrock:InvokeModelWithResponseStream",
        "bedrock:ListInferenceProfiles"
      ],
      "Resource": [
        "arn:aws:bedrock:*:*:inference-profile/*",
        "arn:aws:bedrock:*:*:application-inference-profile/*",
        "arn:aws:bedrock:*:*:foundation-model/*"
      ]
    },
    {
      "Sid": "AllowMarketplaceSubscription",
      "Effect": "Allow",
      "Action": [
        "aws-marketplace:ViewSubscriptions",
        "aws-marketplace:Subscribe"
      ],
      "Resource": "*",
      "Condition": {
        "StringEquals": {
          "aws:CalledViaLast": "bedrock.amazonaws.com"
        }
      }
    }
  ]
}
```

더 제한적인 권한을 위해 Resource를 특정 추론 프로파일 ARN으로 제한할 수 있습니다.

자세한 내용은 [Bedrock IAM 문서](https://docs.aws.amazon.com/bedrock/latest/userguide/security-iam.html)를 참조하세요.

> 비용 추적 및 액세스 제어를 단순화하기 위해 Claude Code 전용 AWS 계정을 생성하는 것을 권장합니다.

## AWS Guardrails

[Amazon Bedrock Guardrails](https://docs.aws.amazon.com/bedrock/latest/userguide/guardrails.html)를 사용하면 Claude Code에 대한 콘텐츠 필터링을 구현할 수 있습니다. [Amazon Bedrock 콘솔](https://console.aws.amazon.com/bedrock/)에서 Guardrail을 생성하고, 버전을 게시한 후, [설정 파일](/en/settings)에 Guardrail 헤더를 추가하세요. 크로스 리전 추론 프로파일을 사용하는 경우 Guardrail에서 Cross-Region 추론을 활성화하세요.

구성 예시:

```json
{
  "env": {
    "ANTHROPIC_CUSTOM_HEADERS": "X-Amzn-Bedrock-GuardrailIdentifier: your-guardrail-id\nX-Amzn-Bedrock-GuardrailVersion: 1"
  }
}
```

## 문제 해결

리전 문제가 발생하는 경우:

* 모델 가용성 확인: `aws bedrock list-inference-profiles --region your-region`
* 지원되는 리전으로 전환: `export AWS_REGION=us-east-1`
* 크로스 리전 액세스를 위해 추론 프로파일 사용 고려

"on-demand throughput isn't supported" 오류가 발생하는 경우:

* 모델을 [추론 프로파일](https://docs.aws.amazon.com/bedrock/latest/userguide/inference-profiles-support.html) ID로 지정

Claude Code는 Bedrock [Invoke API](https://docs.aws.amazon.com/bedrock/latest/APIReference/API_runtime_InvokeModelWithResponseStream.html)를 사용하며 Converse API는 지원하지 않습니다.

## 추가 리소스

* [Bedrock 문서](https://docs.aws.amazon.com/bedrock/)
* [Bedrock 가격](https://aws.amazon.com/bedrock/pricing/)
* [Bedrock 추론 프로파일](https://docs.aws.amazon.com/bedrock/latest/userguide/inference-profiles-support.html)
* [Amazon Bedrock의 Claude Code: 빠른 설정 가이드](https://community.aws/content/2tXkZKrZzlrlu0KfH8gST5Dkppq/claude-code-on-amazon-bedrock-quick-setup-guide)
* [Claude Code 모니터링 구현 (Bedrock)](https://github.com/aws-solutions-library-samples/guidance-for-claude-code-with-amazon-bedrock/blob/main/assets/docs/MONITORING.md)
