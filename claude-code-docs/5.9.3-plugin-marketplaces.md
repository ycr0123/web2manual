---
source: https://code.claude.com/docs/en/plugin-marketplaces.md
fetched: 2026-02-18
section: 6.5
---

# Create and distribute a plugin marketplace

> Build and host plugin marketplaces to distribute Claude Code extensions across teams and communities.

A **plugin marketplace** is a catalog that lets you distribute plugins to others. Marketplaces provide centralized discovery, version tracking, automatic updates, and support for multiple source types.

## Overview

Creating and distributing a marketplace involves:

1. **Creating plugins**: build one or more plugins with commands, agents, hooks, MCP servers, or LSP servers.
2. **Creating a marketplace file**: define a `marketplace.json` that lists your plugins and where to find them.
3. **Host the marketplace**: push to GitHub, GitLab, or another git host.
4. **Share with users**: users add your marketplace with `/plugin marketplace add` and install individual plugins.

## Walkthrough: create a local marketplace

**Step 1: Create the directory structure**

```bash
mkdir -p my-marketplace/.claude-plugin
mkdir -p my-marketplace/plugins/review-plugin/.claude-plugin
mkdir -p my-marketplace/plugins/review-plugin/skills/review
```

**Step 2: Create the skill**

Create `my-marketplace/plugins/review-plugin/skills/review/SKILL.md`:

```markdown
---
description: Review code for bugs, security, and performance
disable-model-invocation: true
---

Review the code I've selected or the recent changes for:
- Potential bugs or edge cases
- Security concerns
- Performance issues
- Readability improvements

Be concise and actionable.
```

**Step 3: Create the plugin manifest**

Create `my-marketplace/plugins/review-plugin/.claude-plugin/plugin.json`:

```json
{
  "name": "review-plugin",
  "description": "Adds a /review skill for quick code reviews",
  "version": "1.0.0"
}
```

**Step 4: Create the marketplace file**

Create `my-marketplace/.claude-plugin/marketplace.json`:

```json
{
  "name": "my-plugins",
  "owner": {
    "name": "Your Name"
  },
  "plugins": [
    {
      "name": "review-plugin",
      "source": "./plugins/review-plugin",
      "description": "Adds a /review skill for quick code reviews"
    }
  ]
}
```

**Step 5: Add and install**

```shell
/plugin marketplace add ./my-marketplace
/plugin install review-plugin@my-plugins
```

**Step 6: Try it out**

```shell
/review
```

> **How plugins are installed**: When users install a plugin, Claude Code copies the plugin directory to a cache location. This means plugins can't reference files outside their directory using paths like `../shared-utils`.

## Create the marketplace file

Create `.claude-plugin/marketplace.json` in your repository root. This file defines your marketplace's name, owner information, and a list of plugins with their sources.

```json
{
  "name": "company-tools",
  "owner": {
    "name": "DevTools Team",
    "email": "devtools@example.com"
  },
  "plugins": [
    {
      "name": "code-formatter",
      "source": "./plugins/formatter",
      "description": "Automatic code formatting on save",
      "version": "2.1.0",
      "author": {
        "name": "DevTools Team"
      }
    },
    {
      "name": "deployment-tools",
      "source": {
        "source": "github",
        "repo": "company/deploy-plugin"
      },
      "description": "Deployment automation tools"
    }
  ]
}
```

## Marketplace schema

### Required fields

| Field | Type | Description | Example |
| :--- | :--- | :--- | :--- |
| `name` | string | Marketplace identifier (kebab-case, no spaces). Users see it when installing plugins. | `"acme-tools"` |
| `owner` | object | Marketplace maintainer information | |
| `plugins` | array | List of available plugins | See below |

> **Reserved names**: The following marketplace names are reserved for official Anthropic use: `claude-code-marketplace`, `claude-code-plugins`, `claude-plugins-official`, `anthropic-marketplace`, `anthropic-plugins`, `agent-skills`, `life-sciences`.

### Owner fields

| Field | Type | Required | Description |
| :--- | :--- | :--- | :--- |
| `name` | string | Yes | Name of the maintainer or team |
| `email` | string | No | Contact email for the maintainer |

### Optional metadata

| Field | Type | Description |
| :--- | :--- | :--- |
| `metadata.description` | string | Brief marketplace description |
| `metadata.version` | string | Marketplace version |
| `metadata.pluginRoot` | string | Base directory prepended to relative plugin source paths |

## Plugin entries

### Required fields

| Field | Type | Description |
| :--- | :--- | :--- |
| `name` | string | Plugin identifier (kebab-case, no spaces) |
| `source` | string\|object | Where to fetch the plugin from |

### Optional plugin fields

| Field | Type | Description |
| :--- | :--- | :--- |
| `description` | string | Brief plugin description |
| `version` | string | Plugin version |
| `author` | object | Plugin author information |
| `homepage` | string | Plugin homepage or documentation URL |
| `repository` | string | Source code repository URL |
| `license` | string | SPDX license identifier |
| `keywords` | array | Tags for plugin discovery and categorization |
| `category` | string | Plugin category for organization |
| `tags` | array | Tags for searchability |
| `strict` | boolean | Controls whether `plugin.json` is the authority for component definitions (default: true) |

## Plugin sources

### Relative paths

```json
{
  "name": "my-plugin",
  "source": "./plugins/my-plugin"
}
```

> Relative paths only work when users add your marketplace via Git. If users add your marketplace via a direct URL to the `marketplace.json` file, relative paths will not resolve correctly.

### GitHub repositories

```json
{
  "name": "github-plugin",
  "source": {
    "source": "github",
    "repo": "owner/plugin-repo"
  }
}
```

You can pin to a specific branch, tag, or commit:

```json
{
  "name": "github-plugin",
  "source": {
    "source": "github",
    "repo": "owner/plugin-repo",
    "ref": "v2.0.0",
    "sha": "a1b2c3d4e5f6a7b8c9d0e1f2a3b4c5d6e7f8a9b0"
  }
}
```

| Field | Type | Description |
| :--- | :--- | :--- |
| `repo` | string | Required. GitHub repository in `owner/repo` format |
| `ref` | string | Optional. Git branch or tag |
| `sha` | string | Optional. Full 40-character git commit SHA |

### Git repositories

```json
{
  "name": "git-plugin",
  "source": {
    "source": "url",
    "url": "https://gitlab.com/team/plugin.git"
  }
}
```

### Advanced plugin entries

```json
{
  "name": "enterprise-tools",
  "source": {
    "source": "github",
    "repo": "company/enterprise-plugin"
  },
  "description": "Enterprise workflow automation tools",
  "version": "2.1.0",
  "commands": [
    "./commands/core/",
    "./commands/enterprise/"
  ],
  "agents": ["./agents/security-reviewer.md"],
  "hooks": {
    "PostToolUse": [
      {
        "matcher": "Write|Edit",
        "hooks": [
          {
            "type": "command",
            "command": "${CLAUDE_PLUGIN_ROOT}/scripts/validate.sh"
          }
        ]
      }
    ]
  },
  "mcpServers": {
    "enterprise-db": {
      "command": "${CLAUDE_PLUGIN_ROOT}/servers/db-server",
      "args": ["--config", "${CLAUDE_PLUGIN_ROOT}/config.json"]
    }
  },
  "strict": false
}
```

### Strict mode

The `strict` field controls whether `plugin.json` is the authority for component definitions.

| Value | Behavior |
| :--- | :--- |
| `true` (default) | `plugin.json` is the authority. The marketplace entry can supplement it with additional components. |
| `false` | The marketplace entry is the entire definition. |

## Host and distribute marketplaces

### Host on GitHub (recommended)

1. **Create a repository**: Set up a new repository for your marketplace
2. **Add marketplace file**: Create `.claude-plugin/marketplace.json` with your plugin definitions
3. **Share with teams**: Users add your marketplace with `/plugin marketplace add owner/repo`

### Host on other git services

```shell
/plugin marketplace add https://gitlab.com/company/plugins.git
```

### Private repositories

For background auto-updates, set the appropriate authentication token in your environment:

| Provider | Environment variables | Notes |
| :--- | :--- | :--- |
| GitHub | `GITHUB_TOKEN` or `GH_TOKEN` | Personal access token or GitHub App token |
| GitLab | `GITLAB_TOKEN` or `GL_TOKEN` | Personal access token or project token |
| Bitbucket | `BITBUCKET_TOKEN` | App password or repository access token |

```bash
export GITHUB_TOKEN=ghp_xxxxxxxxxxxxxxxxxxxx
```

### Test locally before distribution

```shell
/plugin marketplace add ./my-local-marketplace
/plugin install test-plugin@my-local-marketplace
```

### Require marketplaces for your team

Add your marketplace to `.claude/settings.json`:

```json
{
  "extraKnownMarketplaces": {
    "company-tools": {
      "source": {
        "source": "github",
        "repo": "your-org/claude-plugins"
      }
    }
  }
}
```

You can also specify which plugins should be enabled by default:

```json
{
  "enabledPlugins": {
    "code-formatter@company-tools": true,
    "deployment-tools@company-tools": true
  }
}
```

### Managed marketplace restrictions

When `strictKnownMarketplaces` is configured in managed settings:

| Value | Behavior |
| --- | --- |
| Undefined (default) | No restrictions. Users can add any marketplace |
| Empty array `[]` | Complete lockdown. Users cannot add any new marketplaces |
| List of sources | Users can only add marketplaces that match the allowlist exactly |

#### Common configurations

Disable all marketplace additions:

```json
{
  "strictKnownMarketplaces": []
}
```

Allow specific marketplaces only:

```json
{
  "strictKnownMarketplaces": [
    {
      "source": "github",
      "repo": "acme-corp/approved-plugins"
    },
    {
      "source": "url",
      "url": "https://plugins.example.com/marketplace.json"
    }
  ]
}
```

Allow all marketplaces from an internal git server using regex pattern matching:

```json
{
  "strictKnownMarketplaces": [
    {
      "source": "hostPattern",
      "hostPattern": "^github\\.example\\.com$"
    }
  ]
}
```

### Version resolution and release channels

> When possible, avoid setting the version in both places. The plugin manifest always wins silently, which can cause the marketplace version to be ignored.

#### Set up release channels

To support "stable" and "latest" release channels:

```json
{
  "name": "stable-tools",
  "plugins": [
    {
      "name": "code-formatter",
      "source": {
        "source": "github",
        "repo": "acme-corp/code-formatter",
        "ref": "stable"
      }
    }
  ]
}
```

## Validation and testing

Validate your marketplace JSON syntax:

```bash
claude plugin validate .
```

Or from within Claude Code:

```shell
/plugin validate .
```

## Troubleshooting

### Marketplace not loading

* Verify the marketplace URL is accessible
* Check that `.claude-plugin/marketplace.json` exists at the specified path
* Ensure JSON syntax is valid using `claude plugin validate`

### Marketplace validation errors

| Error | Cause | Solution |
| :--- | :--- | :--- |
| `File not found: .claude-plugin/marketplace.json` | Missing manifest | Create the file with required fields |
| `Invalid JSON syntax: Unexpected token...` | JSON syntax error | Check for missing commas, extra commas, or unquoted strings |
| `Duplicate plugin name "x" found in marketplace` | Two plugins share the same name | Give each plugin a unique `name` value |
| `plugins[0].source: Path traversal not allowed` | Source path contains `..` | Use paths relative to marketplace root without `..` |

**Warnings** (non-blocking):

* `Marketplace has no plugins defined`: add at least one plugin to the `plugins` array
* `No marketplace description provided`: add `metadata.description`
* `Plugin "x" uses npm source which is not yet fully implemented`: use `github` or local path sources instead

### Plugins with relative paths fail in URL-based marketplaces

**Cause**: URL-based marketplaces only download the `marketplace.json` file itself. Relative paths reference files on the remote server that were not downloaded.

**Solutions**:

* **Use external sources**: Change plugin entries to use GitHub, npm, or git URL sources instead of relative paths
* **Use a Git-based marketplace**: Host your marketplace in a Git repository and add it with the git URL

## See also

* Discover and install prebuilt plugins - Installing plugins from existing marketplaces
* Plugins - Creating your own plugins
* Plugins reference - Complete technical specifications and schemas
* Plugin settings - Plugin configuration options
* strictKnownMarketplaces reference - Managed marketplace restrictions
