# SPEC-WEB2MANUAL-004: 인수 기준 (Acceptance Criteria)

## 메타데이터

| 항목 | 값 |
|------|-----|
| SPEC ID | SPEC-WEB2MANUAL-004 |
| 기능명 | 진행률 추적 시스템 (Progress Tracking System) |
| 관련 요구사항 | REQ-PERSIST, REQ-DASH, REQ-COMPLETE, REQ-BADGE, REQ-STREAK, REQ-BOOKMARK, REQ-RESET, REQ-NOTIFY, REQ-PERF, REQ-A11Y |

---

## 1. 진행률 데이터 영속성

### AC-001: localStorage 자동 저장

**Given** 사용자가 레슨 페이지에서 학습 중일 때
**When** "학습 완료" 버튼을 클릭하면
**Then** 해당 레슨의 완료 정보가 50ms 이내에 localStorage의 `web2manual-progress` 키에 저장된다
**And** 브라우저를 닫았다가 다시 열어도 완료 상태가 유지된다
**And** 수동 저장 버튼이나 별도 액션 없이 자동으로 저장된다

### AC-002: 익명 사용자 지원

**Given** 사용자가 로그인하지 않은 상태(익명 사용자)일 때
**When** 처음으로 레슨을 완료하면
**Then** 시스템이 자동으로 UUID를 생성하여 userId로 할당한다
**And** 계정 생성 없이 진행률 추적이 정상 동작한다
**And** 생성된 UUID가 이후 세션에서도 동일하게 유지된다

### AC-003: 데이터 내보내기

**Given** 사용자가 대시보드의 데이터 내보내기 버튼을 볼 때
**When** "데이터 내보내기" 버튼을 클릭하면
**Then** `web2manual-progress-YYYY-MM-DD.json` 형식의 파일이 다운로드된다
**And** 파일 내용은 유효한 JSON이며 UserProgress 타입 구조를 따른다
**And** 다운로드된 데이터에 completedLessons, badges, streak, bookmarks가 모두 포함된다

---

## 2. 진행률 대시보드

### AC-004: 전체 완료율 표시

**Given** 사용자가 3개 트랙에 걸쳐 총 10개 레슨 중 4개를 완료한 상태일 때
**When** `/progress` 페이지에 접근하면
**Then** 전체 완료율이 "40%"로 표시된다
**And** 완료 레슨 수 "4/10"이 함께 표시된다
**And** 페이지 로드가 1초 이내에 완료된다

### AC-005: 트랙별 프로그레스 바

**Given** Beginner Track에 4개 레슨이 있고 사용자가 3개를 완료한 상태일 때
**When** 대시보드에서 트랙별 진행률 섹션을 확인하면
**Then** Beginner Track의 프로그레스 바가 75%로 표시된다
**And** 프로그레스 바에 `aria-valuenow="75"`, `aria-valuemax="100"`, `aria-valuemin="0"` 속성이 있다
**And** 5개 트랙 모두 프로그레스 바가 표시된다
**And** 각 트랙명과 "3/4 완료" 텍스트가 함께 표시된다

### AC-006: 캘린더 히트맵

**Given** 사용자가 최근 7일 중 3일에 학습 활동이 있을 때
**When** 대시보드의 캘린더 히트맵 섹션을 확인하면
**Then** 최근 84일(12주)의 격자가 표시된다
**And** 활동이 있는 날짜는 초록색 계열로 색칠되어 있다
**And** 활동량에 따라 색상 강도가 다르다 (1회: 연한 초록, 2-3회: 중간 초록, 4+회: 진한 초록)
**And** 각 셀에 `aria-label="2026년 2월 15일: 2개 레슨 완료"` 형태의 접근성 레이블이 있다

### AC-007: "학습 계속하기" 버튼

**Given** 사용자가 Core Track의 3번째 레슨까지 완료한 상태일 때
**When** 대시보드에서 "학습 계속하기" 버튼을 확인하면
**Then** 버튼에 Core Track 4번째 레슨의 제목이 표시된다
**And** 클릭 시 해당 레슨 페이지(`/learn/core/lesson-4`)로 이동한다

**Given** 모든 레슨을 완료한 상태일 때
**When** 대시보드를 확인하면
**Then** "학습 계속하기" 버튼 대신 "축하합니다! 모든 학습을 완료했습니다" 메시지가 표시된다

---

## 3. 레슨 완료 플로우

### AC-008: 완료 버튼 및 축하 애니메이션

**Given** 사용자가 미완료 레슨 페이지 하단에 있을 때
**When** "학습 완료" 버튼을 클릭하면
**Then** confetti 애니메이션이 화면에 표시된다
**And** 버튼 텍스트가 "완료됨" 상태로 변경된다
**And** 동일 트랙의 다음 미완료 레슨 제목과 "다음 레슨으로 이동" 버튼이 표시된다

**Given** 사용자가 이미 완료된 레슨 페이지에 접근할 때
**When** 레슨 하단을 확인하면
**Then** "완료됨" 상태 표시와 "완료 취소" 링크가 보인다
**And** "학습 완료" 버튼은 표시되지 않는다

### AC-009: 사이드바 실시간 갱신

**Given** 사이드바가 표시된 상태에서 레슨 목록이 보일 때
**When** 현재 레슨을 완료하면
**Then** 사이드바의 해당 레슨 옆에 체크 아이콘이 즉시(1초 이내) 나타난다
**And** 페이지 새로고침 없이 실시간으로 갱신된다

---

## 4. 뱃지/성취 시스템

### AC-010: 첫 번째 레슨 완료 뱃지

**Given** 사용자가 아직 어떤 레슨도 완료하지 않은 상태일 때
**When** 첫 번째 레슨을 완료하면
**Then** "첫 걸음 (First Steps)" 뱃지 획득 토스트 알림이 화면 상단에 표시된다
**And** 토스트에 뱃지 아이콘, 이름("첫 걸음"), 설명이 포함된다
**And** 토스트는 3초 후 자동으로 사라진다
**And** 대시보드의 뱃지 섹션에서 해당 뱃지가 풀 컬러로 표시된다

### AC-011: 트랙 완료 뱃지

**Given** 사용자가 Beginner Track의 마지막 레슨 하나를 남겨둔 상태일 때
**When** 마지막 레슨을 완료하면
**Then** "입문 수료 (Beginner Graduate)" 뱃지 획득 토스트가 표시된다
**And** 대시보드에서 해당 뱃지가 획득 상태로 전환된다

**Given** 사용자가 5개 트랙 중 4개를 완료하고 마지막 트랙의 마지막 레슨을 남겨둔 상태일 때
**When** 마지막 레슨을 완료하면
**Then** 해당 트랙 뱃지와 "Claude Code 전문가 (Claude Code Expert)" 뱃지가 함께 부여된다

### AC-012: 미획득 뱃지 표시

**Given** 9개 뱃지 중 2개만 획득한 상태일 때
**When** 대시보드의 뱃지 섹션을 확인하면
**Then** 획득한 2개 뱃지는 풀 컬러와 획득 일시가 표시된다
**And** 미획득 7개 뱃지는 흐림(grayscale) 효과와 잠금 아이콘이 표시된다
**And** 각 뱃지에 `aria-label="핵심 마스터 - 미획득"` 형태의 접근성 레이블이 있다

---

## 5. 스트릭 추적

### AC-013: 연속 학습 스트릭

**Given** 사용자가 3일 연속으로 매일 1개 이상 레슨을 완료한 상태일 때
**When** 대시보드의 스트릭 카운터를 확인하면
**Then** "3일 연속 학습 중" 메시지가 표시된다
**And** 불꽃 아이콘이 함께 표시된다

**Given** 사용자가 7일 연속 학습을 달성할 때
**When** 7일째 첫 레슨을 완료하면
**Then** 스트릭 마일스톤 축하 모달이 표시된다
**And** "꾸준한 학습자" 뱃지가 함께 부여된다

### AC-014: 스트릭 프리즈

**Given** 사용자가 5일 연속 학습 중이고 프리즈를 사용하지 않은 상태일 때
**When** 하루를 건너뛰고 다음 날 접속하면
**Then** 스트릭 프리즈가 자동 적용되어 스트릭이 유지된다
**And** "스트릭 프리즈 사용됨" 알림이 표시된다
**And** 다음 30일까지 추가 프리즈가 사용 불가하다

---

## 6. 북마크

### AC-015: 레슨 북마크 추가/제거

**Given** 사용자가 레슨 페이지를 보고 있을 때
**When** 북마크 아이콘(빈 하트/별)을 클릭하면
**Then** 아이콘이 채워진 상태로 변경된다
**And** 해당 레슨이 북마크 목록에 추가된다

**When** 채워진 북마크 아이콘을 다시 클릭하면
**Then** 아이콘이 빈 상태로 변경된다
**And** 해당 레슨이 북마크 목록에서 제거된다

### AC-016: 북마크 최대 개수 제한

**Given** 사용자가 이미 20개의 북마크를 가지고 있을 때
**When** 21번째 북마크를 추가하려 하면
**Then** "북마크는 최대 20개까지 저장 가능합니다. 기존 북마크를 삭제한 후 다시 시도해주세요." 경고 메시지가 표시된다
**And** 새 북마크는 추가되지 않는다

---

## 7. 진행률 초기화

### AC-017: 전체 초기화

**Given** 사용자가 설정에서 "진행률 초기화" 버튼을 볼 때
**When** "진행률 초기화" 버튼을 클릭하면
**Then** "모든 학습 기록과 뱃지가 삭제됩니다. 계속하시겠습니까?" 확인 대화상자가 표시된다

**When** 확인 대화상자에서 "확인"을 클릭하면
**Then** completedLessons, badges, streak, bookmarks, dailyActivity가 모두 초기화된다
**And** 대시보드의 모든 진행률이 0%로 리셋된다

**When** 확인 대화상자에서 "취소"를 클릭하면
**Then** 대화상자가 닫히고 데이터가 유지된다

### AC-018: 트랙별 초기화

**Given** 사용자가 Beginner Track과 Core Track을 모두 완료한 상태일 때
**When** Beginner Track만 초기화를 요청하면
**Then** Beginner Track의 완료 레슨만 초기화된다
**And** Core Track의 완료 상태와 뱃지는 유지된다
**And** "입문 수료" 뱃지는 유지된다 (뱃지는 트랙 초기화로 회수하지 않음)

---

## 8. 알림 및 리마인더

### AC-019: 비활동 리마인더

**Given** 사용자가 2일 이상 학습하지 않은 상태일 때
**When** 사이트에 재방문하면
**Then** 화면 상단에 "2일 동안 학습하지 않으셨네요. 오늘 다시 시작해보세요!" 배너가 표시된다
**And** 배너에 닫기(X) 버튼이 있다
**And** 닫기 클릭 시 해당 세션 내에서는 다시 표시되지 않는다

---

## 9. 성능 요구사항

### AC-020: 대시보드 로드 성능

**Given** 30개 레슨 중 15개를 완료하고, 9개 뱃지 중 4개를 획득하고, 84일 활동 기록이 있을 때
**When** `/progress` 페이지에 접근하면
**Then** 모든 대시보드 컴포넌트가 1초 이내에 렌더링 완료된다
**And** 프로그레스 바, 히트맵, 뱃지 그리드가 모두 표시된다

### AC-021: 진행률 저장 성능

**Given** 사용자가 레슨 완료 버튼을 클릭할 때
**When** progressStore.completeLesson이 호출되면
**Then** localStorage 기록이 50ms 이내에 완료된다
**And** 뱃지 조건 평가가 100ms 이내에 완료된다

---

## 10. 접근성 요구사항

### AC-022: 스크린 리더 지원

**Given** 스크린 리더를 사용하는 사용자가 대시보드에 접근할 때
**When** 프로그레스 바에 포커스하면
**Then** "Beginner Track 진행률: 75%, 4개 레슨 중 3개 완료" 형태의 레이블이 읽힌다

**When** 뱃지 그리드에서 특정 뱃지에 포커스하면
**Then** "핵심 마스터 - 획득 (2026년 2월 15일)" 또는 "고급 실천가 - 미획득" 형태의 레이블이 읽힌다

**When** 캘린더 히트맵의 셀에 포커스하면
**Then** "2026년 2월 15일: 2개 레슨 완료" 형태의 레이블이 읽힌다

### AC-023: 키보드 네비게이션

**Given** 키보드만 사용하는 사용자일 때
**When** Tab 키로 대시보드를 탐색하면
**Then** "학습 계속하기" 버튼, 트랙별 프로그레스 바, 뱃지, 북마크 항목, 초기화 버튼 순서로 포커스가 이동한다
**And** Enter 또는 Space 키로 모든 버튼과 토글이 활성화된다

---

## 11. 품질 게이트 (Definition of Done)

### 코드 품질
- [ ] 모든 TypeScript 타입이 strict 모드에서 컴파일 에러 없음
- [ ] ESLint 경고 및 에러 0건
- [ ] Prettier 포맷팅 적용 완료

### 테스트 커버리지
- [ ] progressStore 유닛 테스트: 모든 액션 함수 테스트 (커버리지 85% 이상)
- [ ] 뱃지 평가 엔진 유닛 테스트: 9개 뱃지 조건 모두 테스트
- [ ] 스트릭 계산 유닛 테스트: 정상 증가, 리셋, 프리즈 케이스
- [ ] 컴포넌트 테스트: 주요 컴포넌트 렌더링 및 인터랙션 테스트
- [ ] E2E 테스트: 레슨 완료 -> 대시보드 확인 플로우

### 성능
- [ ] 대시보드 로드 시간 1초 이내
- [ ] localStorage 저장 50ms 이내
- [ ] 뱃지 평가 100ms 이내

### 접근성
- [ ] 모든 프로그레스 바에 aria-valuenow, aria-valuemax 속성 포함
- [ ] 뱃지 획득/미획득 상태 aria-label 제공
- [ ] 캘린더 히트맵 셀에 aria-label 제공
- [ ] 키보드 네비게이션으로 모든 인터랙티브 요소 접근 가능
- [ ] Lighthouse Accessibility 점수 90 이상

### 반응형 디자인
- [ ] 데스크톱(1200px+), 태블릿(768px-1199px), 모바일(~767px) 정상 표시
- [ ] 대시보드 그리드가 화면 크기에 따라 적절히 재배치
